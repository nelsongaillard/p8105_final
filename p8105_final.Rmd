---
title: "P8105: Final Project Proposal"
date: "November 7, 2026"
output: github_document
---
Nelson Gaillard (ng3005),
Matariya Rattanapan (mkr2158),
Mahitha Jangeti (mj3229),
Jefferson Remo (jr4550),
Jonathan Huynh (jkh2157)

```{r, message = FALSE}
library(tidyverse)
```

## Riding Out the Storm: MTA Ridership Through the COVID and Weather

#### Motivation for this project

The COVID-19 pandemic altered patterns of public transit use, exposing the sensitivity of urban mobility to both public-health and environmental conditions. Examining how MTA ridership fluctuated with changing case counts and weather conditions can help identify which factors most strongly affected transit demand, and how long recovery took across time and boroughs. These insights can guide policy around public health preparedness, transit safety, and infrastructure planning under climate variability.

#### Intended final products

- Website
- Report
- Screecast Video

#### Anticipated data sources

MTA Daily Ridership Data: 2020 - 2025 (From data.ny.gov)
```{r, message = FALSE}
MTA_df =
  read_csv("data/MTA.csv", na = c("NA", ".", "")) |> 
  janitor::clean_names()
```

Pre-Covid MTA Ridership Data (From catalog.data.gov)
```{r, message = FALSE}
pre_COVID_MTA_df = 
  read_csv("data/Monthly(from 2008).csv", na = c("NA", ".", "")) |>
  janitor::clean_names() 
```

COVID-19 (From data.cityofnewyork.us)
```{r, message = FALSE}
COVID_df =
  read_csv("data/COVID19.csv", na = c("NA", ".", "")) |> 
  janitor::clean_names()
```

NOAA Weather Data for NYC, Central Park (From ncei.noaa.gov)
```{r, message = FALSE, warning = FALSE}
weather_df = 
  read_csv("data/weather_cp.csv", na = c("NA", ".", "")) |> 
  janitor::clean_names()
```

#### Planned analyses

##### Individual descriptive analyses of our datasets
- MTA Ridership Overview
  - Aggregate daily ridership in monthly averages (2018-2025) and look at trends overall across all different types of transportation (AAR, SIR, MNR, Subway, LIRR, Bus)
    - Line graph
  - Visualize pre-pandemic baseline, pandemic, post-pandemic, 'pandemic recovery'
    - Can make these each into separate graphs
  - Weekday vs weekend ridership volume
    - Boxplot or violin graph
- COVID-19 Overview
  - Plot daily and weekly average
    - Line graph
    - Highlight specific areas of the graph that align with lockdown start, vaccine rollout, omicron surge, etc.
  - Identify major NYC waves and define peaks by calculating maximums
  - Correlation analysis between cases, hospitalizations, and death
    - Heat map
- Weather Overview
  - Can compute average_temp, rain, snow
  - Plot of temperature, vs. time, histogram for rainy and snowy days

##### Comparative / Paired Analyses

- Bus vs Subway vs others recovery post pandemic 
  - Stacked area chart 
- COVID-19 vs Ridership 
  - Merge data by date
- Lag analysis: to see the time between when COVID risk increases (by case numbers) and when people change ridership behaviors 
- Weather vs MTA usage 
  - Look at which temps = decrease or increase in ridership 
  - Which mode of transportation was used most as weather changed 
- Regression analysis: MTA ridership vs. COVID-19 vs. Weather 

#### Visualizations

- Plots and Plotly
  - Line plots: daily/monthly ridership trends 2008 - 2025
  - Density plot: pre vs. post COVID-19 distributions 2021 - 2025
  - Scatterplot: temperature vs. monthly ridership
  - Boxplots comparing weekday vs weekend ridership distributions
  - Stacked area charts
  - Heat map
- Dashboard
- Subway map

#### Coding challenges

- There may be presence of missing data between datasets when merging.
- Temporality may also present a challenge if metrics of time are inconsistent.
- Data availability between boroughs may differ in frequency and weight; we can remedy this with data imputation
- Geospatial mismatch between MTA stations, boroughs, and zip codes may present issues when making relationship analyses
- May need to consider whether to model certain variables as numerical or categorical.
- Aggregating variables relevant to answering our research question.
- Need to know how to handle extreme values of variable(s) in question

#### Planned timeline

- November 10-14: Project Review Meeting
- November 22: Finish Coding
- November 23: Begin Report
  - November 23: Group meeting
- December 1: Finish Website / Screencast
- December 6: Submit Report, Webpage, and Screencast 

